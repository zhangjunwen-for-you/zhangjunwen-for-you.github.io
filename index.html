<!DOCTYPE html>
<html>
    <head>
        <title>It's for you, Z</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            html, body {
                height: 100%;
                width: 100%;
                margin: 0;
                padding: 0;
            }
        
            #mtext {
                margin: auto;
                position: absolute;
                font-size: 88px;
                z-index: 100;
                width: 100%;
                text-align: center;
                top: 20%;
            }
        
            #mtext.thidden {
                display: none;
            }
        
            canvas {
                background: rgb(3, 0, 17);
                position: absolute;
                    top: 0;
            }
        
        
        </style>
    </head>
    <body style="background-color: black;">
        <div id="mtext" class="thidden">
            ♥
        </div>
        <canvas id="canvas"></canvas>
        <script type="text/javascript">
            function Star(x,y,r,color) {
                this.x = x;
                this.y = y;
                this.r = r;
                this.rChange = 0.03;
                this.color = color;
            }
    
            Star.prototype = {
                constructor: Star,
                render: function() {
                    context.beginPath();
                    context.arc(this.x, this.y, this.r, 0, 2*Math.PI, false);
                    context.shadowBlur = 8;
                    context.shadowColor = "white";
                    context.fillStyle = this.color;
                    context.fill();
                },
                update: function() {
                    if (this.r > 2 || this.r < .8) {
                        this.rChange = -this.rChange;
                    }
                    this.r += this.rChange;
                }
            }
    
            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");
    
            var C_WIDTH = canvas.width = document.body.offsetWidth;
            var C_HEIGHT = canvas.height = document.body.offsetHeight;
    
            function randomColor(){
                    var arrColors = ["ffffff", "ffecd3" , "bfcfff"];
                    return "#"+arrColors[Math.floor((Math.random()*3))];
            }
    
            var arrStars = [];
            for(i = 0; i < 313; i++){
                var randX = Math.floor((Math.random()*C_WIDTH)+1);
                var randY = Math.floor((Math.random()*C_HEIGHT)+1);
                var randR = Math.random() * 1.3 + .5;
    
                var star = new Star(randX, randY, randR, randomColor());
                arrStars.push(star);
            }
            for(i = 0; i < 520; i++){
                var randX = Math.floor((Math.random()*C_WIDTH)+1);
                var randY = Math.floor((Math.random()*C_HEIGHT)+1);
                var randR = Math.random() * 0.5 + .3;
    
                var star = new Star(randX, randY, randR, randomColor());
                arrStars.push(star);
            }
            for(i = 0; i < 1314; i++){
                var randX = Math.floor((Math.random()*C_WIDTH)+1);
                var randY = Math.floor((Math.random()*C_HEIGHT)+1);
                var randR = Math.random() * 0.3 + .1;
    
                var star = new Star(randX, randY, randR, randomColor());
                arrStars.push(star);
            }
    
            function animate(){
                for(var i = 0; i < arrStars.length; i++) {
                    arrStars[i].update();
                }
                context.clearRect(0, 0, C_WIDTH, C_HEIGHT);
                for(var i = 0; i < arrStars.length; i++) {
                    arrStars[i].render();
                }
                requestAnimationFrame(animate);
            }
    
            var count = 0;
            var last_index = 0;
    
            function randomText(e) {
                var choices = ["♥", "Z", "J", "W", "D", "K", "Q", "♥", "Z", "J", "W", "D", "K", "Q"];
                if (count > 3) {
                    choices.push("D ♥ Z", "Z ♥ D");
                }
                var index = Math.floor(Math.random() * choices.length);
                if (index == last_index) {
                    index++;
                    last_index = index;
                }
                mtext.innerText = choices[index];
                var colorRed = Math.floor(Math.random()*200 + 1);
                var colorGreen = Math.floor(Math.random()*colorRed + 1);
                var colorBlue = Math.floor(Math.random()*30 + colorRed);
                mtext.style.color = "rgb("+colorRed + ", " + colorGreen + ", " + Math.min(colorBlue, 255) + ")";
                mtext.classList.remove("thidden");
                count++;
                return false;
            }
    
            function hideText(e) {
                mtext.classList.add("thidden");
                return false;
            }

            function changeFavicon(link) {
                let favicon = document.querySelector('link[rel="icon"]');
                if (favicon !== null) {
                    favicon.href = link;
                } else {
                    favicon = document.createElement("link");
                    favicon.rel = "icon";
                    favicon.href = link;
                    document.head.appendChild(favicon);
                }
            }
            
            function start_main() {
                animate();
        
                document.oncontextmenu = (e) => {
                    e.preventDefault()
                    return false;
                }
                canvas.oncontextmenu = (e) => {
                    e.preventDefault()
                    return false;
                }
                mtext.oncontextmenu = (e) => {
                    e.preventDefault()
                    return false;
                }
    
                canvas.onmousedown = randomText;
                canvas.onmouseup = hideText;
                canvas.ontouchstart = randomText;
                canvas.ontouchend = hideText;

                changeFavicon("https://icons8.com/icon/12306/heart")
            }

            start_main();
        </script>
    </body>
</html>